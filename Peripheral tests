# ðŸŽ€ Activate venv, then run the tests in the SSH terminal.
source ~/bean-env/bin/activate

# ðŸŽ€ Microphone: List all audio devices ALSA can see, then record and play back 5s of audio.
python -m sounddevice --list-devices
arecord -d 5 -r 16000 -f S16_LE test.wav && aplay test.wav

# ðŸŽ€ Speaker and amplifier: Play ALSA's WAV sample once.
speaker-test -t wav -c1

# ðŸŽ€ Display: Run a scrolling-text demo on the HyperPixel DPI bus.
git clone https://github.com/hzeller/rpi-rgb-led-matrix.git ~/rgb-test
python ~/rgb-test/examples-api-use/runtext.py -C -y 8 'HELLO'

# ðŸŽ€ Buttons (PTT on GPIO17, Menu on GPIO27)
python - <<'EOF'
from gpiozero import Button
import time
ptt  = Button(17, pull_up=True)
menu = Button(27, pull_up=True)
print("Press PTT or MENU; Ctrl+C to quit")
while True:
    if ptt.is_pressed:
        print("PTT held")
        time.sleep(0.2)
    if menu.is_pressed:
        print("MENU pressed")
        time.sleep(0.2)
EOF
# ðŸŽ€ Holding PTT prints "PTT held" repeatedly.
# ðŸŽ€ Tapping menu prints "MENU pressed" once per tap.

# ðŸŽ€ Tidying up: Delete the recording, then leave the venv.
rm -f test.wav
deactivate
